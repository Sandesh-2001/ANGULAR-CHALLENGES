<div class="flex flex-col justify-center px-6 py-12 lg:px-8">
    <div class="flex justify-end">
        <button type="button" (click)="createNewForm()"
            class="flex w-1/5 py-2 justify-center rounded-md bg-indigo-600 px-3 p y-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Create
            form</button>
    </div>

    <!-- create form modal -->
    @if (isShowGeneralModal) {
    <app-general-modal (isShowModal)="generalModalShowHide($event)">
        <div header>
            <h1 class="text-2xl font-bold">Create form</h1>
        </div>
        <div>
            <label for="formname" class="block text-sm/6 font-medium text-gray-900">Form name</label>
            <div class="mt-2">
                <input type="formname" (keyup)="formNameChange()" name="formname" id="formname" autocomplete="formname"
                    [(ngModel)]="formName"
                    class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
            </div>
        </div>
    </app-general-modal>

    }
    @if (isFormCreated) {
    <div class="text-center">
        <h1 class="text-xl">{{formName}}</h1>
    </div>
    {{generateForm.value | json}}
    <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">

        <form [formGroup]="generateForm" class="space-y-6">

            <div>
                <label for="location" class="block text-sm/6 font-medium text-gray-900">Select type of field</label>
                <div class="mt-2 grid grid-cols-1">
                    <select id="location" name="location" [formControlName]="'type'"
                        class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        @for (option of typeOfField; track $index) {
                        <option [value]="option">{{ option }}</option>
                        }
                    </select>
                    <svg class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4"
                        viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" data-slot="icon">
                        <path fill-rule="evenodd"
                            d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
            {{optionsArray.value| json}}
            @if(getFormControl("type")?.value ==="select" || getFormControl("type")?.value ==="radio"){
            <ng-container formArrayName="options">
                @for (selectOption of optionsArray?.controls;track $index) {
                <div class="mb-3" [formGroupName]="$index">
                    <label for="label" class="block text-sm/6 font-medium text-gray-900">Option {{$index+1}}</label>
                    <div class="mt-2">
                        <input type="text" name="label" id="label" autocomplete="label" formControlName="option"
                            class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                    </div>
                </div>
                }
            </ng-container>
            }


            <!-- if type of selected field is not group -->
            @if (getFormControl('type')?.value !=="group") {
            <div class="mb-3">
                <label for="name" class="block text-sm/6 font-medium text-gray-900">name of field</label>
                <div class="mt-2">
                    <input type="text" name="name" id="name" autocomplete="name" formControlName="name"
                        class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                </div>
            </div>

            <div class="mb-3">
                <label for="label" class="block text-sm/6 font-medium text-gray-900">label of field</label>
                <div class="mt-2">
                    <input type="text" name="label" id="label" autocomplete="label" formControlName="label"
                        [value]="getFormControl('name')?.value || ''" class=" block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1
                            -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2
                            focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                </div>
            </div>


            <div class="mb-3">
                <label for="placeholder" class="block text-sm/6 font-medium text-gray-900">placeholder of field</label>
                <div class="mt-2">
                    <input type="text" name="placeholder" id="placeholder" autocomplete="label"
                        formControlName="placeholder"
                        [value]="getFormControl('name')?.value ? 'Enter ' +getFormControl('name')?.value + '...' :''"
                        class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                </div>
            </div>
            }
            @if (getFormControl('type')?.value === "group") {
            <div class="mb-3">
                <label for="name" class="block text-sm/6 font-medium text-gray-900">name of group</label>
                <div class="mt-2">
                    <input type="text" name="name" id="name" autocomplete="name" formControlName="name"
                        class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                </div>
            </div>

            <div class="mb-3">
                <label for="label" class="block text-sm/6 font-medium text-gray-900">label of field</label>
                <div class="mt-2">
                    <input type="text" name="label" id="label" autocomplete="label" formControlName="label"
                        [value]="getFormControl('name')?.value || ''" class=" block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1
                    -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2
                    focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                </div>
            </div>
            <!-- ------------------------------------------------------------------------------------------------------------- -->
            <p>Group fields</p>
            <!-- {{nestedFormArray.controls| json}} -->
            <div [formArrayName]="'fields'">
                @for (nestedGroup of nestedFormArray.controls; track $index) {
                <div [formGroupName]="$index" class="border border-green-500 p-3">

                    <div>
                        <label for="location" class="block text-sm/6 font-medium text-gray-900">Select type of
                            field</label>
                        <div class="mt-2 grid grid-cols-1">
                            <select id="location" name="location" [formControlName]="'type'"
                                class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                                @for (option of typeOfFieldsInsideNested; track $index) {
                                <option [value]="option">{{ option }}</option>
                                }
                            </select>
                            <svg class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4"
                                viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" data-slot="icon">
                                <path fill-rule="evenodd"
                                    d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
                                    clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                    {{optionsArray.value| json}}
                    @if(getFormControl("type")?.value ==="select" || getFormControl("type")?.value ==="radio"){
                    <ng-container formArrayName="options">
                        @for (selectOption of optionsArray.controls;track $index) {
                        <div class="mb-3" [formGroupName]="$index">
                            <label for="label" class="block text-sm/6 font-medium text-gray-900">Option
                                {{$index}}</label>
                            <div class="mt-2">
                                <input type="text" name="label" id="label" autocomplete="label" formControlName="option"
                                    class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                            </div>
                        </div>
                        }
                    </ng-container>
                    }


                    <div class="mb-3">
                        <label for="name" class="block text-sm/6 font-medium text-gray-900">name of field</label>
                        <div class="mt-2">
                            <input type="text" name="name" id="name" autocomplete="name" formControlName="name"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="label" class="block text-sm/6 font-medium text-gray-900">label of field</label>
                        <div class="mt-2">
                            <input type="text" name="label" id="label" autocomplete="label" formControlName="label"
                                [value]="getFormControl('name')?.value || ''" class=" block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1
                                    -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2
                                    focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        </div>
                    </div>


                    <div class="mb-3">
                        <label for="placeholder" class="block text-sm/6 font-medium text-gray-900">placeholder of
                            field</label>
                        <div class="mt-2">
                            <input type="text" name="placeholder" id="placeholder" autocomplete="label"
                                formControlName="placeholder"
                                [value]="getFormControl('name')?.value ? 'Enter ' +getFormControl('name')?.value + '...' :''"
                                class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
                        </div>
                    </div>
                </div>

                }
            </div>
            <!-- if type of selected field is not group -->

            }


            <!-- group fields end -->


            <div>
                <button type="button" (click)="addControl()"
                    class="flex w-full py-2 justify-center rounded-md bg-indigo-600 px-3 p y-1.5 text-sm/6 font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Add
                    control</button>
            </div>
        </form>
    </div>

    }



</div>